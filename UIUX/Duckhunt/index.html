<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Press+Start+2P&display=swap"
      rel="stylesheet"
    />
    <title>Animointi / Duck hunt</title>
    <style>
      html,
      body {
        min-height: 100vh;
        font-family: 'Press Start 2P', cursive;
      }

      main {
        max-width: 800px;
        margin: auto;
      }

      h1 {
        color: black;
        /* transition: color 1s, transform 1s; */
        transition: all 1s;
      }

      h1:hover {
        transform: rotate(20deg);
        color: lightblue; 
      }

      #stage {
        background-color: paleturquoise;
        width: 800px;
        height: 400px;
        background: url(images/stage.png);
        background-size: contain;
        position: relative;
        overflow: hidden;
      }

      #doggo {
        width: 120px;
        height: 110px;
        background: url(images/sprite.png);

        /* Sijainti */
        position: absolute;
        left: 10px;
        bottom: 30px;
        background-position: 0px 0px;

        /* Animointi */
        /* animation-name: doggowalk;
        animation-duration: 2s; */

        /* Animointi menee takaisin alkuun */
        /* animation-fill-mode: forwards; */

        /* Animointi montako kertaa toistuu */
        /* animation-iteration-count: 4; */

        /* Animaation suunta */
        /* animation-direction: normal; */

        /* Animaation tyyppi/nopeus */
        /* animation-timing-function: normal; */
        
        /* animation-delay: 1s; */

    

        animation: doggowalk 0.5s steps(5) 6, 
        doggomove 3s linear forwards, 
        doggosniff 0.5s steps(2) 3s 6, 
        doggojump 2s steps(2) 6s forwards;
      }

      #bird1 {
        width: 80px;
        height: 80px;
        background: url(images/sprite.png);
        background-position: 0px -220px;
        position: absolute;
        left: 20px;
        top: 10px;
        animation: bird1fly 0.5s steps(3) infinite, bird1move 5s linear forwards;
      }

      @keyframes doggowalk {
        from {
          background-position: 0px 0px;
        }
        to {
          background-position: -600px 0px;
        }
      }

      @keyframes doggomove {
        0% {
          left: 0px;
        }
        100% {
          left: 300px;
        }
      }

      @keyframes doggosniff {
        0% {
          background-position: -360px 0px;
        }
        100% {
          background-position: -600px 0px;
        }
      }

      @keyframes doggojump {
        0% {
            background-position: 0px -110px; /* First frame */
            bottom: 30px; /* Dog's starting position on the ground */
        }
        50% {
            background-position: -240px -110px; /* Second frame */
            bottom: 130px; /* Dog's highest position in the air */
        }
        100% {
            background-position: -300px -110px; /* Third frame */
            bottom: 40px; /* Dog's ending position on the ground */
        }
        }

      /* Bird 1 */

        @keyframes bird1fly {
        from {
            background-position: 0px -220px;
        }
        to {
            background-position: -240px -220px; 
        }
    }
    
        @keyframes bird1move {
        0% {
            left: 0%; /* Start just off the right edge of the screen */
            top: 10px;
        }
        25% {
            top: 30px;
        }
        50% {
            top: 10px;
        }
        75% {
            top: 30px;
        }
        100% {
            top: 10px;
            left: 100%; /* End just off the left edge of the screen */
        }
    }
    </style>
  </head>
  <body>
    <main>
      <h1>Duckhunt Stage</h1>

      <p>
        Duck Hunt is a fantastic arcade game that takes inspiration from the original classic
        available on Nintendo game systems. You must shoot the moving ducks down with your mouse and
        see how many points you can score. The hunting is fun and the controls to aim and fire your
        weapon are simple to master. The graphics are reminiscent of early Nintendo consoles and the
        gameplay really is fun. Be sure to avoid shooting your faithful dog, and aim your weapon
        fast!
      </p>

      <div id="stage">
        <div id="doggo"></div>
        <div id="bird1"></div>
        <div id="bird2"></div>
      </div>
      <div id="console">
        <div class="console" id="bullets"></div>
        <div class="console" id="hits"></div>
        <div class="console" id="points"></div>
      </div>
      <div id="output"></div>
    </main>
    <script>
        const element = document.querySelector('#doggo');
      element.addEventListener('animationstart', listener, false);
      element.addEventListener('animationend', listener, false);
      element.addEventListener('animationiteration', listener, false);

      element.addEventListener('click', () => {
        console.log('Klikkasit koiraa');
        element.classList.add('pause');
      });

      function listener(event) {
        const l = document.createElement('li');
        console.log(event);
        switch (event.type) {
          case 'animationstart':
            l.textContent = `Started: elapsed time is ${event.elapsedTime}`;
            break;
          case 'animationend':
            l.textContent = `Ended: elapsed time is ${event.elapsedTime}`;
            break;
          case 'animationiteration':
            l.textContent = `New loop started at time ${event.elapsedTime}`;
            break;
        }
        document.getElementById('output').appendChild(l);
      }

      /* Doggo hidden after jump */
        document.addEventListener('DOMContentLoaded', (event) => {
            const doggo = document.getElementById('doggo');
            
            doggo.addEventListener('animationend', (e) => {
                if (e.animationName === 'doggojump') {
                doggo.style.display = 'none';
                }
            });
        });
    </script>
  </body>
</html>
